function quickCapture(options){
    // url,delay,callback,type,viewPortSize,setting

    options.delay = options.delay || 0;
    options.type = options.type || 'Png';//Svg,Png,Jpeg
    options.viewPortSize=options.viewPortSize || [1366,768];

    options.setting=options.setting || {};

    options.setting.width= options.setting.width || options.viewPortSize[0];
    options.setting.height= options.setting.height || options.viewPortSize[1];


    var wrapper=document.createElement('div');
    wrapper.style.width=0
    wrapper.style.height=0
    wrapper.style.overflow="hidden";
    document.body.appendChild(wrapper);

    var iframe = document.createElement('iframe');
    iframe.width=options.viewPortSize[0];
    iframe.height=options.viewPortSize[1];
    iframe.src=options.url;
    wrapper.appendChild(iframe);

    // document.getElementById('target').appendChild(iframe);

    iframe.onload = function () {
        var script = iframe.contentWindow.document.createElement('script');
        script.onload = function () {
            setTimeout(function(){
                iframe.contentWindow.domtoimage['to'+options.type](iframe.contentWindow.document.body,options.setting)
                    .then(function (dataUrl) {

                        options.callback(dataUrl);
                        wrapper.remove();

                    })
                    .catch(function (error) {
                        console.error('oops, something went wrong!', error);
                    });
            },options.delay);
        };
        script.src = "data:application/javascript;base64,LyohIGRvbS10by1pbWFnZSAxMC0wNi0yMDE3ICovCiFmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYihhLGIpe2Z1bmN0aW9uIGMoYSl7cmV0dXJuIGIuYmdjb2xvciYmKGEuc3R5bGUuYmFja2dyb3VuZENvbG9yPWIuYmdjb2xvciksYi53aWR0aCYmKGEuc3R5bGUud2lkdGg9Yi53aWR0aCsicHgiKSxiLmhlaWdodCYmKGEuc3R5bGUuaGVpZ2h0PWIuaGVpZ2h0KyJweCIpLGIuc3R5bGUmJk9iamVjdC5rZXlzKGIuc3R5bGUpLmZvckVhY2goZnVuY3Rpb24oYyl7YS5zdHlsZVtjXT1iLnN0eWxlW2NdfSksYX1yZXR1cm4gYj1ifHx7fSxnKGIpLFByb21pc2UucmVzb2x2ZShhKS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBpKGEsYi5maWx0ZXIsITApfSkudGhlbihqKS50aGVuKGspLnRoZW4oYykudGhlbihmdW5jdGlvbihjKXtyZXR1cm4gbChjLGIud2lkdGh8fHEud2lkdGgoYSksYi5oZWlnaHR8fHEuaGVpZ2h0KGEpKX0pfWZ1bmN0aW9uIGMoYSxiKXtyZXR1cm4gaChhLGJ8fHt9KS50aGVuKGZ1bmN0aW9uKGIpe3JldHVybiBiLmdldENvbnRleHQoIjJkIikuZ2V0SW1hZ2VEYXRhKDAsMCxxLndpZHRoKGEpLHEuaGVpZ2h0KGEpKS5kYXRhfSl9ZnVuY3Rpb24gZChhLGIpe3JldHVybiBoKGEsYnx8e30pLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9EYXRhVVJMKCl9KX1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIGI9Ynx8e30saChhLGIpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9EYXRhVVJMKCJpbWFnZS9qcGVnIixiLnF1YWxpdHl8fDEpfSl9ZnVuY3Rpb24gZihhLGIpe3JldHVybiBoKGEsYnx8e30pLnRoZW4ocS5jYW52YXNUb0Jsb2IpfWZ1bmN0aW9uIGcoYSl7InVuZGVmaW5lZCI9PXR5cGVvZiBhLmltYWdlUGxhY2Vob2xkZXI/di5pbXBsLm9wdGlvbnMuaW1hZ2VQbGFjZWhvbGRlcj11LmltYWdlUGxhY2Vob2xkZXI6di5pbXBsLm9wdGlvbnMuaW1hZ2VQbGFjZWhvbGRlcj1hLmltYWdlUGxhY2Vob2xkZXIsInVuZGVmaW5lZCI9PXR5cGVvZiBhLmNhY2hlQnVzdD92LmltcGwub3B0aW9ucy5jYWNoZUJ1c3Q9dS5jYWNoZUJ1c3Q6di5pbXBsLm9wdGlvbnMuY2FjaGVCdXN0PWEuY2FjaGVCdXN0fWZ1bmN0aW9uIGgoYSxjKXtmdW5jdGlvbiBkKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO2lmKGIud2lkdGg9Yy53aWR0aHx8cS53aWR0aChhKSxiLmhlaWdodD1jLmhlaWdodHx8cS5oZWlnaHQoYSksYy5iZ2NvbG9yKXt2YXIgZD1iLmdldENvbnRleHQoIjJkIik7ZC5maWxsU3R5bGU9Yy5iZ2NvbG9yLGQuZmlsbFJlY3QoMCwwLGIud2lkdGgsYi5oZWlnaHQpfXJldHVybiBifXJldHVybiBiKGEsYykudGhlbihxLm1ha2VJbWFnZSkudGhlbihxLmRlbGF5KDEwMCkpLnRoZW4oZnVuY3Rpb24oYil7dmFyIGM9ZChhKTtyZXR1cm4gYy5nZXRDb250ZXh0KCIyZCIpLmRyYXdJbWFnZShiLDAsMCksY30pfWZ1bmN0aW9uIGkoYSxiLGMpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudD9xLm1ha2VJbWFnZShhLnRvRGF0YVVSTCgpKTphLmNsb25lTm9kZSghMSl9ZnVuY3Rpb24gZShhLGIsYyl7ZnVuY3Rpb24gZChhLGIsYyl7dmFyIGQ9UHJvbWlzZS5yZXNvbHZlKCk7cmV0dXJuIGIuZm9yRWFjaChmdW5jdGlvbihiKXtkPWQudGhlbihmdW5jdGlvbigpe3JldHVybiBpKGIsYyl9KS50aGVuKGZ1bmN0aW9uKGIpe2ImJmEuYXBwZW5kQ2hpbGQoYil9KX0pLGR9dmFyIGU9YS5jaGlsZE5vZGVzO3JldHVybiAwPT09ZS5sZW5ndGg/UHJvbWlzZS5yZXNvbHZlKGIpOmQoYixxLmFzQXJyYXkoZSksYykudGhlbihmdW5jdGlvbigpe3JldHVybiBifSl9ZnVuY3Rpb24gZihhLGIpe2Z1bmN0aW9uIGMoKXtmdW5jdGlvbiBjKGEsYil7ZnVuY3Rpb24gYyhhLGIpe3EuYXNBcnJheShhKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe2Iuc2V0UHJvcGVydHkoYyxhLmdldFByb3BlcnR5VmFsdWUoYyksYS5nZXRQcm9wZXJ0eVByaW9yaXR5KGMpKX0pfWEuY3NzVGV4dD9iLmNzc1RleHQ9YS5jc3NUZXh0OmMoYSxiKX1jKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGEpLGIuc3R5bGUpfWZ1bmN0aW9uIGQoKXtmdW5jdGlvbiBjKGMpe2Z1bmN0aW9uIGQoYSxiLGMpe2Z1bmN0aW9uIGQoYSl7dmFyIGI9YS5nZXRQcm9wZXJ0eVZhbHVlKCJjb250ZW50Iik7cmV0dXJuIGEuY3NzVGV4dCsiIGNvbnRlbnQ6ICIrYisiOyJ9ZnVuY3Rpb24gZShhKXtmdW5jdGlvbiBiKGIpe3JldHVybiBiKyI6ICIrYS5nZXRQcm9wZXJ0eVZhbHVlKGIpKyhhLmdldFByb3BlcnR5UHJpb3JpdHkoYik/IiAhaW1wb3J0YW50IjoiIil9cmV0dXJuIHEuYXNBcnJheShhKS5tYXAoYikuam9pbigiOyAiKSsiOyJ9dmFyIGY9Ii4iK2ErIjoiK2IsZz1jLmNzc1RleHQ/ZChjKTplKGMpO3JldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShmKyJ7IitnKyJ9Iil9dmFyIGU9d2luZG93LmdldENvbXB1dGVkU3R5bGUoYSxjKSxmPWUuZ2V0UHJvcGVydHlWYWx1ZSgiY29udGVudCIpO2lmKCIiIT09ZiYmIm5vbmUiIT09Zil7dmFyIGc9cS51aWQoKTtiLmNsYXNzTmFtZT1iLmNsYXNzTmFtZSsiICIrZzt2YXIgaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2guYXBwZW5kQ2hpbGQoZChnLGMsZSkpLGIuYXBwZW5kQ2hpbGQoaCl9fVsiOmJlZm9yZSIsIjphZnRlciJdLmZvckVhY2goZnVuY3Rpb24oYSl7YyhhKX0pfWZ1bmN0aW9uIGUoKXthIGluc3RhbmNlb2YgSFRNTFRleHRBcmVhRWxlbWVudCYmKGIuaW5uZXJIVE1MPWEudmFsdWUpLGEgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50JiZiLnNldEF0dHJpYnV0ZSgidmFsdWUiLGEudmFsdWUpfWZ1bmN0aW9uIGYoKXtiIGluc3RhbmNlb2YgU1ZHRWxlbWVudCYmKGIuc2V0QXR0cmlidXRlKCJ4bWxucyIsImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiksYiBpbnN0YW5jZW9mIFNWR1JlY3RFbGVtZW50JiZbIndpZHRoIiwiaGVpZ2h0Il0uZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYz1iLmdldEF0dHJpYnV0ZShhKTtjJiZiLnN0eWxlLnNldFByb3BlcnR5KGEsYyl9KSl9cmV0dXJuIGIgaW5zdGFuY2VvZiBFbGVtZW50P1Byb21pc2UucmVzb2x2ZSgpLnRoZW4oYykudGhlbihkKS50aGVuKGUpLnRoZW4oZikudGhlbihmdW5jdGlvbigpe3JldHVybiBifSk6Yn1yZXR1cm4gY3x8IWJ8fGIoYSk/UHJvbWlzZS5yZXNvbHZlKGEpLnRoZW4oZCkudGhlbihmdW5jdGlvbihjKXtyZXR1cm4gZShhLGMsYil9KS50aGVuKGZ1bmN0aW9uKGIpe3JldHVybiBmKGEsYil9KTpQcm9taXNlLnJlc29sdmUoKX1mdW5jdGlvbiBqKGEpe3JldHVybiBzLnJlc29sdmVBbGwoKS50aGVuKGZ1bmN0aW9uKGIpe3ZhciBjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7cmV0dXJuIGEuYXBwZW5kQ2hpbGQoYyksYy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShiKSksYX0pfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIHQuaW5saW5lQWxsKGEpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gYX0pfWZ1bmN0aW9uIGwoYSxiLGMpe3JldHVybiBQcm9taXNlLnJlc29sdmUoYSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gYS5zZXRBdHRyaWJ1dGUoInhtbG5zIiwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIpLChuZXcgWE1MU2VyaWFsaXplcikuc2VyaWFsaXplVG9TdHJpbmcoYSl9KS50aGVuKHEuZXNjYXBlWGh0bWwpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuJzxmb3JlaWduT2JqZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPicrYSsiPC9mb3JlaWduT2JqZWN0PiJ9KS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybic8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IicrYisnIiBoZWlnaHQ9IicrYysnIj4nK2ErIjwvc3ZnPiJ9KS50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwiK2F9KX1mdW5jdGlvbiBtKCl7ZnVuY3Rpb24gYSgpe3ZhciBhPSJhcHBsaWNhdGlvbi9mb250LXdvZmYiLGI9ImltYWdlL2pwZWciO3JldHVybnt3b2ZmOmEsd29mZjI6YSx0dGY6ImFwcGxpY2F0aW9uL2ZvbnQtdHJ1ZXR5cGUiLGVvdDoiYXBwbGljYXRpb24vdm5kLm1zLWZvbnRvYmplY3QiLHBuZzoiaW1hZ2UvcG5nIixqcGc6YixqcGVnOmIsZ2lmOiJpbWFnZS9naWYiLHRpZmY6ImltYWdlL3RpZmYiLHN2ZzoiaW1hZ2Uvc3ZnK3htbCJ9fWZ1bmN0aW9uIGIoYSl7dmFyIGI9L1wuKFteXC5cL10qPykkL2cuZXhlYyhhKTtyZXR1cm4gYj9iWzFdOiIifWZ1bmN0aW9uIGMoYyl7dmFyIGQ9YihjKS50b0xvd2VyQ2FzZSgpO3JldHVybiBhKClbZF18fCIifWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEuc2VhcmNoKC9eKGRhdGE6KS8pIT09LTF9ZnVuY3Rpb24gZShhKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oYil7Zm9yKHZhciBjPXdpbmRvdy5hdG9iKGEudG9EYXRhVVJMKCkuc3BsaXQoIiwiKVsxXSksZD1jLmxlbmd0aCxlPW5ldyBVaW50OEFycmF5KGQpLGY9MDtmPGQ7ZisrKWVbZl09Yy5jaGFyQ29kZUF0KGYpO2IobmV3IEJsb2IoW2VdLHt0eXBlOiJpbWFnZS9wbmcifSkpfSl9ZnVuY3Rpb24gZihhKXtyZXR1cm4gYS50b0Jsb2I/bmV3IFByb21pc2UoZnVuY3Rpb24oYil7YS50b0Jsb2IoYil9KTplKGEpfWZ1bmN0aW9uIGcoYSxiKXt2YXIgYz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoKSxkPWMuY3JlYXRlRWxlbWVudCgiYmFzZSIpO2MuaGVhZC5hcHBlbmRDaGlsZChkKTt2YXIgZT1jLmNyZWF0ZUVsZW1lbnQoImEiKTtyZXR1cm4gYy5ib2R5LmFwcGVuZENoaWxkKGUpLGQuaHJlZj1iLGUuaHJlZj1hLGUuaHJlZn1mdW5jdGlvbiBoKCl7dmFyIGE9MDtyZXR1cm4gZnVuY3Rpb24oKXtmdW5jdGlvbiBiKCl7cmV0dXJuKCIwMDAwIisoTWF0aC5yYW5kb20oKSpNYXRoLnBvdygzNiw0KTw8MCkudG9TdHJpbmcoMzYpKS5zbGljZSgtNCl9cmV0dXJuInUiK2IoKSthKyt9fWZ1bmN0aW9uIGkoYSl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGIsYyl7dmFyIGQ9bmV3IEltYWdlO2Qub25sb2FkPWZ1bmN0aW9uKCl7YihkKX0sZC5vbmVycm9yPWMsZC5zcmM9YX0pfWZ1bmN0aW9uIGooYSl7dmFyIGI9M2U0O3JldHVybiB2LmltcGwub3B0aW9ucy5jYWNoZUJ1c3QmJihhKz0oL1w/Ly50ZXN0KGEpPyImIjoiPyIpKyhuZXcgRGF0ZSkuZ2V0VGltZSgpKSxuZXcgUHJvbWlzZShmdW5jdGlvbihjKXtmdW5jdGlvbiBkKCl7aWYoND09PWcucmVhZHlTdGF0ZSl7aWYoMjAwIT09Zy5zdGF0dXMpcmV0dXJuIHZvaWQoaD9jKGgpOmYoImNhbm5vdCBmZXRjaCByZXNvdXJjZTogIithKyIsIHN0YXR1czogIitnLnN0YXR1cykpO3ZhciBiPW5ldyBGaWxlUmVhZGVyO2Iub25sb2FkZW5kPWZ1bmN0aW9uKCl7dmFyIGE9Yi5yZXN1bHQuc3BsaXQoLywvKVsxXTtjKGEpfSxiLnJlYWRBc0RhdGFVUkwoZy5yZXNwb25zZSl9fWZ1bmN0aW9uIGUoKXtoP2MoaCk6ZigidGltZW91dCBvZiAiK2IrIm1zIG9jY3VyZWQgd2hpbGUgZmV0Y2hpbmcgcmVzb3VyY2U6ICIrYSl9ZnVuY3Rpb24gZihhKXtjb25zb2xlLmVycm9yKGEpLGMoIiIpfXZhciBnPW5ldyBYTUxIdHRwUmVxdWVzdDtnLm9ucmVhZHlzdGF0ZWNoYW5nZT1kLGcub250aW1lb3V0PWUsZy5yZXNwb25zZVR5cGU9ImJsb2IiLGcudGltZW91dD1iLGcub3BlbigiR0VUIixhLCEwKSxnLnNlbmQoKTt2YXIgaDtpZih2LmltcGwub3B0aW9ucy5pbWFnZVBsYWNlaG9sZGVyKXt2YXIgaT12LmltcGwub3B0aW9ucy5pbWFnZVBsYWNlaG9sZGVyLnNwbGl0KC8sLyk7aSYmaVsxXSYmKGg9aVsxXSl9fSl9ZnVuY3Rpb24gayhhLGIpe3JldHVybiJkYXRhOiIrYisiO2Jhc2U2NCwiK2F9ZnVuY3Rpb24gbChhKXtyZXR1cm4gYS5yZXBsYWNlKC8oWy4qKz9eJHt9KCl8XFtcXVwvXFxdKS9nLCJcXCQxIil9ZnVuY3Rpb24gbShhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGMpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtjKGIpfSxhKX0pfX1mdW5jdGlvbiBuKGEpe2Zvcih2YXIgYj1bXSxjPWEubGVuZ3RoLGQ9MDtkPGM7ZCsrKWIucHVzaChhW2RdKTtyZXR1cm4gYn1mdW5jdGlvbiBvKGEpe3JldHVybiBhLnJlcGxhY2UoLyMvZywiJTIzIikucmVwbGFjZSgvXG4vZywiJTBBIil9ZnVuY3Rpb24gcChhKXt2YXIgYj1yKGEsImJvcmRlci1sZWZ0LXdpZHRoIiksYz1yKGEsImJvcmRlci1yaWdodC13aWR0aCIpO3JldHVybiBhLnNjcm9sbFdpZHRoK2IrY31mdW5jdGlvbiBxKGEpe3ZhciBiPXIoYSwiYm9yZGVyLXRvcC13aWR0aCIpLGM9cihhLCJib3JkZXItYm90dG9tLXdpZHRoIik7cmV0dXJuIGEuc2Nyb2xsSGVpZ2h0K2IrY31mdW5jdGlvbiByKGEsYil7dmFyIGM9d2luZG93LmdldENvbXB1dGVkU3R5bGUoYSkuZ2V0UHJvcGVydHlWYWx1ZShiKTtyZXR1cm4gcGFyc2VGbG9hdChjLnJlcGxhY2UoInB4IiwiIikpfXJldHVybntlc2NhcGU6bCxwYXJzZUV4dGVuc2lvbjpiLG1pbWVUeXBlOmMsZGF0YUFzVXJsOmssaXNEYXRhVXJsOmQsY2FudmFzVG9CbG9iOmYscmVzb2x2ZVVybDpnLGdldEFuZEVuY29kZTpqLHVpZDpoKCksZGVsYXk6bSxhc0FycmF5Om4sZXNjYXBlWGh0bWw6byxtYWtlSW1hZ2U6aSx3aWR0aDpwLGhlaWdodDpxfX1mdW5jdGlvbiBuKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4gYS5zZWFyY2goZSkhPT0tMX1mdW5jdGlvbiBiKGEpe2Zvcih2YXIgYixjPVtdO251bGwhPT0oYj1lLmV4ZWMoYSkpOyljLnB1c2goYlsxXSk7cmV0dXJuIGMuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiFxLmlzRGF0YVVybChhKX0pfWZ1bmN0aW9uIGMoYSxiLGMsZCl7ZnVuY3Rpb24gZShhKXtyZXR1cm4gbmV3IFJlZ0V4cCgiKHVybFxcKFsnXCJdPykoIitxLmVzY2FwZShhKSsiKShbJ1wiXT9cXCkpIiwiZyIpfXJldHVybiBQcm9taXNlLnJlc29sdmUoYikudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gYz9xLnJlc29sdmVVcmwoYSxjKTphfSkudGhlbihkfHxxLmdldEFuZEVuY29kZSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gcS5kYXRhQXNVcmwoYSxxLm1pbWVUeXBlKGIpKX0pLnRoZW4oZnVuY3Rpb24oYyl7cmV0dXJuIGEucmVwbGFjZShlKGIpLCIkMSIrYysiJDMiKX0pfWZ1bmN0aW9uIGQoZCxlLGYpe2Z1bmN0aW9uIGcoKXtyZXR1cm4hYShkKX1yZXR1cm4gZygpP1Byb21pc2UucmVzb2x2ZShkKTpQcm9taXNlLnJlc29sdmUoZCkudGhlbihiKS50aGVuKGZ1bmN0aW9uKGEpe3ZhciBiPVByb21pc2UucmVzb2x2ZShkKTtyZXR1cm4gYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2I9Yi50aGVuKGZ1bmN0aW9uKGIpe3JldHVybiBjKGIsYSxlLGYpfSl9KSxifSl9dmFyIGU9L3VybFwoWyciXT8oW14nIl0rPylbJyJdP1wpL2c7cmV0dXJue2lubGluZUFsbDpkLHNob3VsZFByb2Nlc3M6YSxpbXBsOntyZWFkVXJsczpiLGlubGluZTpjfX19ZnVuY3Rpb24gbygpe2Z1bmN0aW9uIGEoKXtyZXR1cm4gYihkb2N1bWVudCkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gUHJvbWlzZS5hbGwoYS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVzb2x2ZSgpfSkpfSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gYS5qb2luKCJcbiIpfSl9ZnVuY3Rpb24gYigpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuIGEuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhLnR5cGU9PT1DU1NSdWxlLkZPTlRfRkFDRV9SVUxFfSkuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiByLnNob3VsZFByb2Nlc3MoYS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCJzcmMiKSl9KX1mdW5jdGlvbiBiKGEpe3ZhciBiPVtdO3JldHVybiBhLmZvckVhY2goZnVuY3Rpb24oYSl7dHJ5e3EuYXNBcnJheShhLmNzc1J1bGVzfHxbXSkuZm9yRWFjaChiLnB1c2guYmluZChiKSl9Y2F0Y2goYyl7Y29uc29sZS5sb2coIkVycm9yIHdoaWxlIHJlYWRpbmcgQ1NTIHJ1bGVzIGZyb20gIithLmhyZWYsYy50b1N0cmluZygpKX19KSxifWZ1bmN0aW9uIGMoYSl7cmV0dXJue3Jlc29sdmU6ZnVuY3Rpb24oKXt2YXIgYj0oYS5wYXJlbnRTdHlsZVNoZWV0fHx7fSkuaHJlZjtyZXR1cm4gci5pbmxpbmVBbGwoYS5jc3NUZXh0LGIpfSxzcmM6ZnVuY3Rpb24oKXtyZXR1cm4gYS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCJzcmMiKX19fXJldHVybiBQcm9taXNlLnJlc29sdmUocS5hc0FycmF5KGRvY3VtZW50LnN0eWxlU2hlZXRzKSkudGhlbihiKS50aGVuKGEpLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGEubWFwKGMpfSl9cmV0dXJue3Jlc29sdmVBbGw6YSxpbXBsOntyZWFkQWxsOmJ9fX1mdW5jdGlvbiBwKCl7ZnVuY3Rpb24gYShhKXtmdW5jdGlvbiBiKGIpe3JldHVybiBxLmlzRGF0YVVybChhLnNyYyk/UHJvbWlzZS5yZXNvbHZlKCk6UHJvbWlzZS5yZXNvbHZlKGEuc3JjKS50aGVuKGJ8fHEuZ2V0QW5kRW5jb2RlKS50aGVuKGZ1bmN0aW9uKGIpe3JldHVybiBxLmRhdGFBc1VybChiLHEubWltZVR5cGUoYS5zcmMpKX0pLnRoZW4oZnVuY3Rpb24oYil7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGMsZCl7YS5vbmxvYWQ9YyxhLm9uZXJyb3I9ZCxhLnNyYz1ifSl9KX1yZXR1cm57aW5saW5lOmJ9fWZ1bmN0aW9uIGIoYyl7ZnVuY3Rpb24gZChhKXt2YXIgYj1hLnN0eWxlLmdldFByb3BlcnR5VmFsdWUoImJhY2tncm91bmQiKTtyZXR1cm4gYj9yLmlubGluZUFsbChiKS50aGVuKGZ1bmN0aW9uKGIpe2Euc3R5bGUuc2V0UHJvcGVydHkoImJhY2tncm91bmQiLGIsYS5zdHlsZS5nZXRQcm9wZXJ0eVByaW9yaXR5KCJiYWNrZ3JvdW5kIikpfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBhfSk6UHJvbWlzZS5yZXNvbHZlKGEpfXJldHVybiBjIGluc3RhbmNlb2YgRWxlbWVudD9kKGMpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gYyBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQ/YShjKS5pbmxpbmUoKTpQcm9taXNlLmFsbChxLmFzQXJyYXkoYy5jaGlsZE5vZGVzKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSl9KSl9KTpQcm9taXNlLnJlc29sdmUoYyl9cmV0dXJue2lubGluZUFsbDpiLGltcGw6e25ld0ltYWdlOmF9fX12YXIgcT1tKCkscj1uKCkscz1vKCksdD1wKCksdT17aW1hZ2VQbGFjZWhvbGRlcjp2b2lkIDAsY2FjaGVCdXN0OiExfSx2PXt0b1N2ZzpiLHRvUG5nOmQsdG9KcGVnOmUsdG9CbG9iOmYsdG9QaXhlbERhdGE6YyxpbXBsOntmb250RmFjZXM6cyxpbWFnZXM6dCx1dGlsOnEsaW5saW5lcjpyLG9wdGlvbnM6e319fTsidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz12OmEuZG9tdG9pbWFnZT12fSh0aGlzKTs=";
        iframe.contentWindow.document.head.appendChild(script);
    }
}